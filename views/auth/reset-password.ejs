<!doctype html>
<html class="no-js" lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Uthabiti Africa | Reset Password</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Top script start -->
  <%- include('../partials/top_script'); %>
    <!-- / Top script end -->
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="back-link back-backend">
          <a href="https://www.uthabitiafrica.org/" class="btn btn-primary">Close Portal</a>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12"></div>
      <div class="col-md-4 col-md-4 col-sm-4 col-xs-12">
        <div class="text-center ps-recovered">
          <h3>Change Your Password</h3>
        </div>

            <div class="hpanel">
              <div class="panel-body poss-recover">
                <form action="/auth/reset-password" method="POST">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <input type="password" placeholder="New Password" title="Enter your new password" required
                                name="password" id="newPassword" class="form-control">
                                <span class="help-block small text-danger mg-t-30" id="passwordFeedback"></span>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <input type="password" placeholder="Confirm Password" title="Re-enter your new password" required
                                name="confirmPassword" id="confirmPassword" class="form-control">
                                <span class="help-block small text-danger mg-t-30" id="confirmPasswordFeedback"></span>
                            </div>
                        </div>
                    </div>

                  <button class="btn btn-success btn-block" type="submit" id="submitPassword">Save password</button>
                </form>
              </div>
            </div>
      </div>
      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12"></div>
    </div>
    <div class="row">
      <div class="col-md-12 col-md-12 col-sm-12 col-xs-12 text-center login-footer">
        <p>Copyright &copy; 2025 <a href="https://uhrtur.co.ke">Uhrtur Group LTD</a> All rights reserved.</p>
      </div>
    </div>
  </div>

  <!-- Bottom script start -->
  <%- include('../partials/bottom_script'); %>
    <!-- / Bottom script end -->

    <script>
    const passwordInput = document.getElementById('newPassword');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const passwordButton = document.getElementById('submitPassword');
    const passwordFeedback = document.getElementById('passwordFeedback');
    const confirmPasswordFeedback = document.getElementById('confirmPasswordFeedback');

    let isPasswordValid = false;
    let isConfirmPasswordValid = false;

    // Utility function to toggle class names
    function toggleClass(element, isValid) {
        if (isValid) {
            element.classList.add('is-valid');
            element.classList.remove('is-invalid');
        } else {
            element.classList.add('is-invalid');
            element.classList.remove('is-valid');
        }
    }

    // Validate Password
        passwordInput.addEventListener('input', () => {
            const password = passwordInput.value;

            if (password.length >= 8) {
                isPasswordValid = true;
                passwordFeedback.textContent = '';
                toggleClass(passwordInput, true);
            } else {
                isPasswordValid = false;
                passwordFeedback.textContent = 'Password must be at least 8 characters long.';
                passwordFeedback.className = 'error';
                toggleClass(passwordInput, false);
            }

            toggleSubmitButton();
        });

        // Validate Confirm Password
        confirmPasswordInput.addEventListener('input', () => {
            const confirmPassword = confirmPasswordInput.value;

            if (confirmPassword === passwordInput.value) {
                isConfirmPasswordValid = true;
                confirmPasswordFeedback.textContent = '';
                toggleClass(confirmPasswordInput, true);
            } else {
                isConfirmPasswordValid = false;
                confirmPasswordFeedback.textContent = 'Passwords do not match.';
                confirmPasswordFeedback.className = 'error';
                toggleClass(confirmPasswordInput, false);
            }

            toggleSubmitButton();
        });

        function toggleSubmitButton() {
            passwordButton.disabled = !isPasswordValid;
            passwordButton.disabled = !isConfirmPasswordValid;
        }

    toggleSubmitButton();
</script>
</body>

</html>